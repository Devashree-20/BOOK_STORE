{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
  <title>Devu's Book Store - Your Cart</title>

  <!-- Additional CSS Files -->
  <link rel="stylesheet" type="text/css" href="{% static 'my_books/assets/css/bootstrap.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'my_books/assets/css/font-awesome.css' %}">
  <link rel="stylesheet" href="{% static 'my_books/assets/css/templatemo-hexashop.css' %}">
  <link rel="stylesheet" href="{% static 'my_books/assets/css/owl-carousel.css' %}">
  <link rel="stylesheet" href="{% static 'my_books/assets/css/lightbox.css' %}">
</head>

<body>
  <!-- ***** Header Area Start ***** -->
<header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="{% url 'index' %}" class="logo">
                        <img src="https://x23155906-book-bucket.s3.eu-west-1.amazonaws.com/my_books/logo.png" width="300" height="70">
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li class="nav-item active"><a class="nav-link" href="{% url 'index' %}">Home</a></li>
                        <li class="nav-item active"><a class="nav-link" href="{% url 'order_books' %}">Order Books</a></li>
                        <li class="nav-item active"><a class="nav-link" href="{% url 'cart' %}">Your Cart</a></li>
                        {% if user.is_authenticated %}
                            <li class="nav-item"><a class="nav-link" href="#">{{ user.username }}</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
                        {% else %}
                            <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'signup' %}">Sign Up</a></li>
                        {% endif %}
                    </ul>           
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
</header>

  <!-- ***** Header Area End ***** -->

  <!-- Main Content Area -->
  <div class="main-content" style="margin-top: 150px;">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-heading">
            <h2>Your Cart</h2>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Title</th>
                      <th scope="col">Price</th>
                      <th scope="col">Quantity</th>
                      <th scope="col">Total</th>
                      <th scope="col">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for item in items %}
                    <tr>
                      <th scope="row">{{ forloop.counter }}</th>
                      <td>{{ item.title }}</td>
                      <td>EUR {{ item.price }}</td>
                      <td>{{ item.quantity }}</td>
                      <td>EUR {{ item.price }} * {{ item.quantity }}</td>
                      <td>
                        <button onclick="removeFromCart('{{ item.book_id }}')">Remove</button>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
              <div>
                <h4>Total: EUR {{ total_price }}</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Main Content Area -->

  <!-- ***** Footer Start ***** -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="first-item">
                        <div class="logo">
                            <img src="https://x23155906-book-bucket.s3.eu-west-1.amazonaws.com/my_books/logo.png" alt="">
                        </div>
                        <ul>
                            <li><a href="#">16501 Collins Ave, Sunny Isles Beach, FL 33160, United States</a></li>
                            <li><a href="#">hexashop@company.com</a></li>
                            <li><a href="#">010-020-0340</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <h4>Shopping &amp; Categories</h4>
                    <ul>
                        <li><a href="#">Men’s Shopping</a></li>
                        <li><a href="#">Women’s Shopping</a></li>
                        <li><a href="#">Kid's Shopping</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="#">Homepage</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Help &amp; Information</h4>
                    <ul>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">FAQ's</a></li>
                        <li><a href="#">Shipping</a></li>
                        <li><a href="#">Tracking ID</a></li>
                    </ul>
                </div>
                <div class="col-lg-12">
                    <div class="under-footer">
                        <p>Copyright © 2022 HexaShop Co., Ltd. All Rights Reserved. 
                        
                        <br>Design: <a href="https://templatemo.com" target="_parent" title="free css templates">TemplateMo</a></p>
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#"><i class="fa fa-behance"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
  <!-- End Footer Area -->

  <!-- JavaScript Files -->
  <script src="{% static 'my_books/assets/js/jquery-2.1.0.min.js'%}"></script>
  <script src="{% static 'my_books/assets/js/popper.js'%}"></script>
  <script src="{% static 'my_books/assets/js/bootstrap.min.js'%}"></script>
  <script src="{% static 'my_books/assets/js/owl-carousel.js'%}"></script>
  <script src="{% static 'my_books/assets/js/accordions.js'%}"></script>
  <script src="{% static 'my_books/assets/js/scrollreveal.min.js'%}"></script>
  <script src="{% static 'my_books/assets/js/waypoints.min.js'%}"></script>
  <script src="{% static 'my_books/assets/js/jquery.counterup.min.js'%}"></script>
  <script src="{% static 'my_books/assets/js/imgfix.min.js'%}"></script>
  <script src="{% static 'my_books/assets/js/slick.js'%}"></script>
  <script src="{% static 'my_books/assets/js/lightbox.js'%}"></script>
  <script src="{% static 'my_books/assets/js/isotope.js'%}"></script>
  <script src="{% static 'my_books/assets/js/custom.js'%}"></script>

  <!-- AJAX Script for Removing from Cart -->
  <script>
    function removeFromCart(bookId) {
        $.ajax({
            type: 'POST',
            url: '{% url "remove_from_cart" %}',
            data: {
                'book_id': bookId,
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                alert('Item removed from cart!');
                window.location.reload(); // Refresh the page to reflect changes
            },
            error: function(xhr, status, error) {
                console.error(error);
            }
        });
    }
</script>
</body>

</html>
